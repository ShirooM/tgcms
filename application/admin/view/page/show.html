<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    {include file="public/css" /}
</head>
<body>
<div class="layui-card">
    <div class="layui-card-header">
          <a href="{:url('admin/domain/show')}">站点管理</a> /
          <a><cite>页面管理</cite></a>
    </div>
    <div class="layui-card-body">
        <div>
            <a href="{:url('admin/page/add')}" class="layui-btn layui-btn-normal">新增页面</a>
            <a href="#" class="layui-btn layui-btn-normal">刷新</a>
        </div>
        <table id="pages" lay-filter="pages"></table>

    </div>
</div>
{include file="public/js" /}
<script>
    layui.use(['layer', 'table'], function () {
        var layer = layui.layer;
        var table = layui.table;

        window.del = function (id, url) {
            layer.confirm('确认要删除' + url + '吗？', {icon: 3, title: '提示'}, function (index) {
                console.log('确认删除' + id);
                layer.close(index);
            });
        };

        table.render({
            elem: '#pages',
            url: '{:url("admin/page/show")}',//数据接口
            method: 'post',
            where: {domain_id: {$domain_id}},
            loading: true,
            page: true,//开启分页
            cols: [[
                {field: 'page_id', title: 'ID',width:80},
                {field: 'page_alias', title: '别名',width:100},
                {field: 'domain_url', title: '域名',width:250},
                {field: 'model_name', title: '模板目录',width:100},
                {field: 'model_pc_filename', title: '模板文件',width:150},
                {field: 'user_name', title: '推广信息',width:110},
                {
                    title: '操作',
                    toolbar: '<div>' +
                    '<a class="layui-btn layui-btn-normal layui-btn-sm" href="{:url(\'admin/page/edit\')}/domain_id/{{d.page_id}}">编辑</a>' +
                    '<a class="layui-btn layui-btn-danger layui-btn-sm" href="{:url(\'admin/page/del\')}/domain_id/{{d.page_id}}">删除</a>' +
                    '<a class="layui-btn layui-btn-normal layui-btn-sm" href="{:url(\'admin/page/show\')}/domain_id/{{d.domain_id}}">访问页面</a>' +
                    '</div>'
                }
            ]]
        });
    });

</script>
</body>
</html>